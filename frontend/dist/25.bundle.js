/*! For license information please see 25.bundle.js.LICENSE.txt */
(self.webpackChunkdev_health=self.webpackChunkdev_health||[]).push([[25],{551:()=>{},1234:()=>{},4530:()=>{},5817:()=>{},8108:()=>{},8590:()=>{},8809:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var n=r(6540),o=(r(8551),r(8560)),i=r(1140),a=r(7428);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,s=Object.create(u.prototype);return l(s,"_invoke",function(r,n,o){var i,c,u,l=0,s=o||[],f=!1,m={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,c=0,u=e,m.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!f&&l&&!o&&t<s.length;t++){var o,i=s[t],d=m.p,v=i[2];r>3?(o=v===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,m.v=n,m.n=i[1]):d<v&&(o=r<3||i[0]>n||n>v)&&(i[4]=r,i[5]=n,m.n=v,c=0))}if(o||r>1)return a;throw f=!0,n}return function(o,s,v){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,v),c=s,u=v;(t=c<2?e:u)||!f;){i||(c?c<3?(c>1&&(m.n=-1),d(c,u)):m.n=u:m.v=u);try{if(l=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=m.n<0)?u:r.call(n,m))!==a)break}catch(t){i=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),s}var a={};function c(){}function s(){}function f(){}t=Object.getPrototypeOf;var m=[][n]?t(t([][n]())):(l(t={},n,function(){return this}),t),d=f.prototype=c.prototype=Object.create(m);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=f,l(d,"constructor",f),l(f,"constructor",s),s.displayName="GeneratorFunction",l(f,o,"GeneratorFunction"),l(d),l(d,o,"Generator"),l(d,n,function(){return this}),l(d,"toString",function(){return"[object Generator]"}),(u=function(){return{w:i,m:v}})()}function l(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}l=function(e,t,r,n){function i(t,r){l(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},l(e,t,r,n)}function s(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){d(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e,t,r){return(t=function(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var p=1200,y=function(){var e,t,r=(0,o.A)(),c=r.user,l=r.token,f=(0,a.o)().t,d=(e=(0,n.useState)(function(){try{var e=localStorage.getItem("visionReminderState");if(e)return JSON.parse(e)}catch(e){console.error("Error loading reminder state:",e)}return{seconds:p,isActive:!1,remindersShown:0,startTime:null}}),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=d[0],b=d[1],h=(0,n.useRef)(null),g=(0,n.useCallback)(function(e){try{localStorage.setItem("visionReminderState",JSON.stringify(e))}catch(e){console.error("Error saving reminder state:",e)}},[]),w=(0,n.useCallback)(function(e){b(function(t){var r=m(m({},t),e);return g(r),r})},[g]),x=(0,n.useCallback)(function(e,t){try{if(!("Notification"in window))return;window.Notification(e,{body:t,tag:"vision-reminder"})}catch(e){}},[]);(0,n.useEffect)(function(){"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission()},[]);var S=function(){var e,t=(e=u().m(function e(){var t;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(c&&l){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,fetch("".concat(i.J,"/gamification/update-statistics"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({blinkReminders:1})});case 2:e.n=4;break;case 3:e.p=3,t=e.v,console.error("Error updating statistics:",t);case 4:return e.a(2)}},e,null,[[1,3]])}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,c,"next",e)}function c(e){s(i,n,o,a,c,"throw",e)}a(void 0)})});return function(){return t.apply(this,arguments)}}();(0,n.useEffect)(function(){return y.isActive?h.current=setInterval(function(){b(function(e){var t=e.seconds-1;if(t<=0){E();var r=m(m({},e),{},{seconds:p,isActive:!1,startTime:null,remindersShown:e.remindersShown+1});return g(r),r}var n=m(m({},e),{},{seconds:t});return g(n),n})},1e3):h.current&&clearInterval(h.current),function(){h.current&&clearInterval(h.current)}},[y.isActive,g]);var E=function(){S(),x("Vision Reminder!","Look at something 20 feet away for 20 seconds!")},O=Math.floor(y.seconds/60).toString().padStart(2,"0"),j=(y.seconds%60).toString().padStart(2,"0");return n.createElement("div",{className:"flex flex-col items-center gap-4 p-6 bg-white rounded-lg shadow-lg max-w-sm w-full"},n.createElement("div",{className:"text-center mb-4"},n.createElement("div",{className:"text-lg font-semibold mb-2"},"Vision Reminder"),n.createElement("div",{className:"text-4xl md:text-6xl font-mono font-bold text-gray-800 mb-2"},O,":",j),n.createElement("div",{className:"text-sm text-gray-600"},"Every 20 minutes â€” 20 seconds looking into the distance")),n.createElement("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-left mb-4 w-full"},n.createElement("h3",{className:"font-semibold text-green-900 mb-2"},"ðŸ’¡ ",f("vision.whyImportant.title")),n.createElement("p",{className:"text-sm text-green-800"},f("vision.whyImportant.subtitle")),n.createElement("ul",{className:"text-sm text-green-800 mt-2 space-y-1"},n.createElement("li",null,"â€¢ ",f("vision.whyImportant.rule")),n.createElement("li",null,"â€¢ ",f("vision.whyImportant.duration")),n.createElement("li",null,"â€¢ ",f("vision.whyImportant.strain")),n.createElement("li",null,"â€¢ ",f("vision.whyImportant.computer")))),n.createElement("div",{className:"flex gap-2 mb-4"},n.createElement("button",{onClick:function(){return y.isActive?void w({isActive:!1,startTime:null}):void w({isActive:!0,startTime:Date.now()})},style:{cursor:"pointer"},className:"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-medium"},y.isActive?"Pause":"Start"),n.createElement("button",{onClick:function(){w({seconds:p,isActive:!1,startTime:null,remindersShown:0})},style:{cursor:"pointer"},className:"px-6 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 transition-colors font-medium"},"Reset")),n.createElement("div",{className:"w-full bg-gray-50 rounded-lg p-4"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-2xl font-bold text-blue-600"},"Reminders Shown: ",y.remindersShown))),c&&n.createElement("div",{className:"text-center text-sm text-gray-500 mt-2"},"ðŸ’¡ ",f("vision.earnPoints")),n.createElement("div",{className:"text-xs text-gray-500 text-center mt-2"},f("vision.ruleDescription")))},b=r(60),h=r.n(b),g=r(2007),w=(r(8536),r(3476));function x(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,l=Object.create(u.prototype);return S(l,"_invoke",function(r,n,o){var i,c,u,l=0,s=o||[],f=!1,m={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,c=0,u=e,m.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!f&&l&&!o&&t<s.length;t++){var o,i=s[t],d=m.p,v=i[2];r>3?(o=v===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,m.v=n,m.n=i[1]):d<v&&(o=r<3||i[0]>n||n>v)&&(i[4]=r,i[5]=n,m.n=v,c=0))}if(o||r>1)return a;throw f=!0,n}return function(o,s,v){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,v),c=s,u=v;(t=c<2?e:u)||!f;){i||(c?c<3?(c>1&&(m.n=-1),d(c,u)):m.n=u:m.v=u);try{if(l=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=m.n<0)?u:r.call(n,m))!==a)break}catch(t){i=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(S(t={},n,function(){return this}),t),f=l.prototype=c.prototype=Object.create(s);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,S(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,S(f,"constructor",l),S(l,"constructor",u),u.displayName="GeneratorFunction",S(l,o,"GeneratorFunction"),S(f),S(f,o,"Generator"),S(f,n,function(){return this}),S(f,"toString",function(){return"[object Generator]"}),(x=function(){return{w:i,m}})()}function S(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}S=function(e,t,r,n){function i(t,r){S(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},S(e,t,r,n)}function E(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function O(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){E(i,n,o,a,c,"next",e)}function c(e){E(i,n,o,a,c,"throw",e)}a(void 0)})}}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?N(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function k(e){var t=function(e,t){return Math.hypot(e.x-t.x,e.y-t.y)},r=t(e[1],e[5])+t(e[2],e[4]),n=2*t(e[0],e[3]);return 0===n?0:r/n}var P=function(){var e=(0,n.useRef)(null),t=(0,n.useRef)(null),r=j((0,n.useState)(0),2),o=r[0],i=r[1],a=j((0,n.useState)(0),2),c=a[0],u=a[1],l=j((0,n.useState)(!1),2),s=l[0],f=l[1],m=j((0,n.useState)("idle"),2),d=m[0],v=m[1],p=(0,n.useMemo)(function(){return{width:480,height:360,facingMode:"user"}},[]);return(0,n.useEffect)(function(){var r=null,n=[],o=0,a=function(){var a=O(x().m(function a(){var c;return x().w(function(a){for(;;)switch(a.p=a.n){case 0:return a.p=0,a.n=1,g.jh6("webgl");case 1:return a.n=2,g.Gc4();case 2:return a.n=3,w.Fz(w.JZ.MediaPipeFaceMesh,{runtime:"mediapipe",refineLandmarks:!0,solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh"});case 3:c=a.v,t.current=c,v("running"),r=window.setInterval(O(x().m(function t(){var r,a,l,m,d,v,p,y,b,h,g,w,S,E;return x().w(function(t){for(;;)switch(t.n){case 0:if((r=e.current)&&r.video){t.n=1;break}return t.a(2);case 1:if(!((a=r.video).readyState<2)){t.n=2;break}return t.a(2);case 2:return t.n=3,c.estimateFaces(a,{flipHorizontal:!0});case 3:if(l=t.v,(m=null==l?void 0:l[0])&&m.keypoints){t.n=4;break}return t.a(2);case 4:d=[33,160,158,133,153,144],v=[362,385,387,263,373,380],p=m.keypoints,y=d.map(function(e){return{x:p[e].x,y:p[e].y}}),b=v.map(function(e){return{x:p[e].x,y:p[e].y}}),h=k(y),g=k(b),i(w=(h+g)/2),S=Date.now(),w<.22&&!s&&f(!0),w>=.22&&s&&(f(!1),o+=1),n.push(S),n=n.filter(function(e){return S-e<=6e4}),E=o/Math.max(1,150*n.length/6e4),u(Math.round(E)),S%5e3<150&&fetch("/api/blink-events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({blinksPerMin:Math.round(E)})}).catch(function(){});case 5:return t.a(2)}},t)})),150),a.n=5;break;case 4:a.p=4,a.v,v("error");case 5:return a.a(2)}},a,null,[[0,4]])}));return function(){return a.apply(this,arguments)}}();return a(),function(){r&&window.clearInterval(r),t.current=null}},[s]),n.createElement("div",{className:"grid gap-3"},n.createElement("div",{className:"text-sm"},"Status: ",d),n.createElement("div",{className:"text-sm"},"EAR: ",o.toFixed(3)," | Morgue/min: ",c),n.createElement("div",{className:"relative rounded-2xl overflow-hidden border border-slate-200",style:{width:480,height:360}},n.createElement(h(),{ref:e,audio:!1,mirrored:!0,videoConstraints:p,style:{width:480,height:360}})))},A=r(9740);const T=function(){var e=(0,a.o)().t;return n.createElement("div",{className:"flex flex-row"},n.createElement(A.Z,{title:e("vision.title")},n.createElement("p",{className:"mb-4 text-sm text-slate-600"},e("vision.subtitle")),n.createElement(y,null)),n.createElement(A.Z,{title:"Blink Monitoring (Experimental)"},n.createElement(P,null)))}}}]);