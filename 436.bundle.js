/*! For license information please see 436.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkdev_health=self.webpackChunkdev_health||[]).push([[436],{1140:(e,t,r)=>{r.d(t,{J:()=>o});var n="undefined"!=typeof window,a=n&&window.location&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname),o=n&&window.__API_BASE_URL__||(a?"http://localhost:3001/api":"/api")},1436:(e,t,r)=>{r.r(t),r.d(t,{default:()=>A});var n=r(6540),a=r(8560),o=r(9740),c=r(1140);function l(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var l=n&&n.prototype instanceof s?n:s,u=Object.create(l.prototype);return i(u,"_invoke",function(r,n,a){var o,l,i,s=0,u=a||[],m=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return o=t,l=0,i=e,f.n=r,c}};function d(r,n){for(l=r,i=n,t=0;!m&&s&&!a&&t<u.length;t++){var a,o=u[t],d=f.p,p=o[2];r>3?(a=p===n)&&(i=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=d&&((a=r<2&&d<o[1])?(l=0,f.v=n,f.n=o[1]):d<p&&(a=r<3||o[0]>n||n>p)&&(o[4]=r,o[5]=n,f.n=p,l=0))}if(a||r>1)return c;throw m=!0,n}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&d(u,p),l=u,i=p;(t=l<2?e:i)||!m;){o||(l?l<3?(l>1&&(f.n=-1),d(l,i)):f.n=i:f.v=i);try{if(s=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(m=f.n<0)?i:r.call(n,f))!==c)break}catch(t){o=e,l=1,i=t}finally{s=1}}return{value:t,done:m}}}(r,a,o),!0),u}var c={};function s(){}function u(){}function m(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(i(t={},n,function(){return this}),t),d=m.prototype=s.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,i(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return u.prototype=m,i(d,"constructor",m),i(m,"constructor",u),u.displayName="GeneratorFunction",i(m,a,"GeneratorFunction"),i(d),i(d,a,"Generator"),i(d,n,function(){return this}),i(d,"toString",function(){return"[object Generator]"}),(l=function(){return{w:o,m:p}})()}function i(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}i=function(e,t,r,n){function o(t,r){i(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},i(e,t,r,n)}function s(e,t,r,n,a,o,c){try{var l=e[o](c),i=l.value}catch(e){return void r(e)}l.done?t(i):Promise.resolve(i).then(n,a)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,c,l=[],i=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{if(!i&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f=function(){var e,t,r=(0,a.A)(),i=r.user,m=r.token,f=u((0,n.useState)(null),2),d=f[0],p=f[1],y=u((0,n.useState)(!1),2),v=y[0],g=y[1];(0,n.useEffect)(function(){m&&i&&b()},[m,i]);var b=function(){var e,t=(e=l().m(function e(){var t,r,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,g(!0),e.n=1,fetch("".concat(c.J,"/gamification/user-achievements"),{headers:{Authorization:"Bearer ".concat(m)}});case 1:if(!(t=e.v).ok){e.n=3;break}return e.n=2,t.json();case 2:r=e.v,p(r);case 3:e.n=5;break;case 4:e.p=4,n=e.v,console.error("Error fetching achievements:",n);case 5:return e.p=5,g(!1),e.f(5);case 6:return e.a(2)}},e,null,[[0,4,5,6]])}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function c(e){s(o,n,a,c,l,"next",e)}function l(e){s(o,n,a,c,l,"throw",e)}c(void 0)})});return function(){return t.apply(this,arguments)}}();if(!i)return null;if(v)return n.createElement(o.Z,null,n.createElement("div",{className:"animate-pulse"},n.createElement("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),n.createElement("div",{className:"h-20 bg-gray-200 rounded"})));var h=function(e){switch(e){case"common":default:return"bg-gray-100 text-gray-800";case"rare":return"bg-blue-100 text-blue-800";case"epic":return"bg-purple-100 text-purple-800";case"legendary":return"bg-yellow-100 text-yellow-800"}};return n.createElement("div",{className:"space-y-6"},n.createElement(o.Z,null,n.createElement("div",{className:"flex items-center justify-between mb-4"},n.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Your Profile"),n.createElement("div",{className:"text-sm text-gray-500"},"Level ",i.level)),n.createElement("div",{className:"grid grid-cols-3 gap-4"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-2xl font-bold text-indigo-600"},i.healthScore),n.createElement("div",{className:"text-sm text-gray-500"},"Health Points")),n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-2xl font-bold text-green-600"},(null===(e=i.badges)||void 0===e?void 0:e.length)||0),n.createElement("div",{className:"text-sm text-gray-500"},"Badges")),n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-2xl font-bold text-purple-600"},(null==d||null===(t=d.achievements)||void 0===t?void 0:t.length)||0),n.createElement("div",{className:"text-sm text-gray-500"},"Achievements"))),n.createElement("div",{className:"mt-4"},n.createElement("div",{className:"flex justify-between text-sm text-gray-500 mb-1"},n.createElement("span",null,"Experience"),n.createElement("span",null,(null==d?void 0:d.experience)||0," / ",100*i.level)),n.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},n.createElement("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(100,((null==d?void 0:d.experience)||0)/(100*i.level)*100),"%")}})))),i.badges&&i.badges.length>0&&n.createElement(o.Z,null,n.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},"Your Badges"),n.createElement("div",{className:"flex flex-wrap gap-2"},i.badges.map(function(e,t){return n.createElement("div",{key:t,className:"px-3 py-1 bg-indigo-100 text-indigo-800 text-sm rounded-full font-medium"},e)}))),(null==d?void 0:d.achievements)&&d.achievements.length>0&&n.createElement(o.Z,null,n.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},"Earned Achievements"),n.createElement("div",{className:"space-y-3"},d.achievements.map(function(e,t){return n.createElement("div",{key:t,className:"flex items-center p-3 bg-gray-50 rounded-lg"},n.createElement("div",{className:"text-2xl mr-3"},e.icon||"üèÜ"),n.createElement("div",{className:"flex-1"},n.createElement("div",{className:"font-medium text-gray-900"},e.name),n.createElement("div",{className:"text-sm text-gray-600"},e.description),n.createElement("div",{className:"text-xs text-gray-500 mt-1"},"Earned ",new Date(e.earnedAt).toLocaleDateString("en-US"))),e.points&&n.createElement("div",{className:"text-right"},n.createElement("div",{className:"text-sm font-medium text-indigo-600"},"+",e.points),e.rarity&&n.createElement("div",{className:"text-xs px-2 py-1 rounded ".concat(h(e.rarity))},function(e){switch(e){case"common":default:return"Common";case"rare":return"Rare";case"epic":return"Epic";case"legendary":return"Legendary"}}(e.rarity))))}))))};function d(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var i=n&&n.prototype instanceof l?n:l,s=Object.create(i.prototype);return p(s,"_invoke",function(r,n,a){var o,l,i,s=0,u=a||[],m=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return o=t,l=0,i=e,f.n=r,c}};function d(r,n){for(l=r,i=n,t=0;!m&&s&&!a&&t<u.length;t++){var a,o=u[t],d=f.p,p=o[2];r>3?(a=p===n)&&(i=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=d&&((a=r<2&&d<o[1])?(l=0,f.v=n,f.n=o[1]):d<p&&(a=r<3||o[0]>n||n>p)&&(o[4]=r,o[5]=n,f.n=p,l=0))}if(a||r>1)return c;throw m=!0,n}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&d(u,p),l=u,i=p;(t=l<2?e:i)||!m;){o||(l?l<3?(l>1&&(f.n=-1),d(l,i)):f.n=i:f.v=i);try{if(s=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(m=f.n<0)?i:r.call(n,f))!==c)break}catch(t){o=e,l=1,i=t}finally{s=1}}return{value:t,done:m}}}(r,a,o),!0),s}var c={};function l(){}function i(){}function s(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(p(t={},n,function(){return this}),t),m=s.prototype=l.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,p(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return i.prototype=s,p(m,"constructor",s),p(s,"constructor",i),i.displayName="GeneratorFunction",p(s,a,"GeneratorFunction"),p(m),p(m,a,"Generator"),p(m,n,function(){return this}),p(m,"toString",function(){return"[object Generator]"}),(d=function(){return{w:o,m:f}})()}function p(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}p=function(e,t,r,n){function o(t,r){p(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},p(e,t,r,n)}function y(e,t,r,n,a,o,c){try{var l=e[o](c),i=l.value}catch(e){return void r(e)}l.done?t(i):Promise.resolve(i).then(n,a)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,c,l=[],i=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{if(!i&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var b=function(){var e=v((0,n.useState)([]),2),t=e[0],r=e[1],a=v((0,n.useState)(!0),2),c=a[0],l=a[1];(0,n.useEffect)(function(){i()},[]);var i=function(){var e,t=(e=d().m(function e(){var t,n,a;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,l(!0),e.n=1,fetch("http://localhost:3001/api/gamification/leaderboard");case 1:if(!(t=e.v).ok){e.n=3;break}return e.n=2,t.json();case 2:n=e.v,r(n.leaderboard);case 3:e.n=5;break;case 4:e.p=4,a=e.v,console.error("Error fetching leaderboard:",a);case 5:return e.p=5,l(!1),e.f(5);case 6:return e.a(2)}},e,null,[[0,4,5,6]])}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function c(e){y(o,n,a,c,l,"next",e)}function l(e){y(o,n,a,c,l,"throw",e)}c(void 0)})});return function(){return t.apply(this,arguments)}}(),s=function(e){switch(e){case 0:return"bg-yellow-100 text-yellow-800";case 1:return"bg-gray-100 text-gray-800";case 2:return"bg-orange-100 text-orange-800";default:return"bg-gray-50 text-gray-600"}};return c?n.createElement(o.Z,null,n.createElement("div",{className:"animate-pulse"},n.createElement("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),n.createElement("div",{className:"space-y-3"},[1,2,3,4,5].map(function(e){return n.createElement("div",{key:e,className:"h-12 bg-gray-200 rounded"})})))):n.createElement(o.Z,null,n.createElement("div",{className:"flex items-center justify-between mb-6"},n.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Health Leaderboard"),n.createElement("button",{onClick:i,className:"text-sm text-indigo-600 hover:text-indigo-500 font-medium"},"Refresh")),0===t.length?n.createElement("div",{className:"text-center py-8 text-gray-500"},"No data to display yet"):n.createElement("div",{className:"space-y-3"},t.map(function(e,t){var r;return n.createElement("div",{key:t,className:"flex items-center p-3 rounded-lg ".concat(s(t))},n.createElement("div",{className:"flex-shrink-0 w-8 text-center font-bold text-lg"},function(e){switch(e){case 0:return"ü•á";case 1:return"ü•à";case 2:return"ü•â";default:return"#".concat(e+1)}}(t)),n.createElement("div",{className:"flex-1 ml-3"},n.createElement("div",{className:"font-medium text-gray-900"},e.username),n.createElement("div",{className:"text-sm text-gray-600"},"Level ",e.level," ‚Ä¢ ",(null===(r=e.badges)||void 0===r?void 0:r.length)||0," badges")),n.createElement("div",{className:"text-right"},n.createElement("div",{className:"text-lg font-bold text-indigo-600"},e.healthScore),n.createElement("div",{className:"text-xs text-gray-500"},"points")))})),n.createElement("div",{className:"mt-6 pt-4 border-t border-gray-200"},n.createElement("div",{className:"text-center"},n.createElement("p",{className:"text-sm text-gray-500"},"Compete with colleagues for a healthy lifestyle!"),n.createElement("p",{className:"text-xs text-gray-400 mt-1"},"Complete tasks and earn health points"))))},h=r(7428);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function w(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var i=n&&n.prototype instanceof l?n:l,s=Object.create(i.prototype);return E(s,"_invoke",function(r,n,a){var o,l,i,s=0,u=a||[],m=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return o=t,l=0,i=e,f.n=r,c}};function d(r,n){for(l=r,i=n,t=0;!m&&s&&!a&&t<u.length;t++){var a,o=u[t],d=f.p,p=o[2];r>3?(a=p===n)&&(i=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=d&&((a=r<2&&d<o[1])?(l=0,f.v=n,f.n=o[1]):d<p&&(a=r<3||o[0]>n||n>p)&&(o[4]=r,o[5]=n,f.n=p,l=0))}if(a||r>1)return c;throw m=!0,n}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&d(u,p),l=u,i=p;(t=l<2?e:i)||!m;){o||(l?l<3?(l>1&&(f.n=-1),d(l,i)):f.n=i:f.v=i);try{if(s=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(m=f.n<0)?i:r.call(n,f))!==c)break}catch(t){o=e,l=1,i=t}finally{s=1}}return{value:t,done:m}}}(r,a,o),!0),s}var c={};function l(){}function i(){}function s(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(E(t={},n,function(){return this}),t),m=s.prototype=l.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,E(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return i.prototype=s,E(m,"constructor",s),E(s,"constructor",i),i.displayName="GeneratorFunction",E(s,a,"GeneratorFunction"),E(m),E(m,a,"Generator"),E(m,n,function(){return this}),E(m,"toString",function(){return"[object Generator]"}),(w=function(){return{w:o,m:f}})()}function E(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}E=function(e,t,r,n){function o(t,r){E(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},E(e,t,r,n)}function N(e,t,r,n,a,o,c){try{var l=e[o](c),i=l.value}catch(e){return void r(e)}l.done?t(i):Promise.resolve(i).then(n,a)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){O(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function O(e,t,r){return(t=function(e){var t=function(e){if("object"!=x(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,c,l=[],i=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{if(!i&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const A=function(){var e=(0,a.A)(),t=e.user,r=e.token,l=e.updateUser,i=(0,h.o)(),s=(i.language,i.setLanguage,i.t),u=S((0,n.useState)(!1),2),m=u[0],d=u[1],p=S((0,n.useState)({username:(null==t?void 0:t.username)||"",currentPassword:"",newPassword:"",confirmPassword:""}),2),y=p[0],v=p[1],g=S((0,n.useState)(null),2),x=g[0],E=g[1],P=S((0,n.useState)(!1),2),k=P[0],A=P[1],T=S((0,n.useState)(null),2),_=(T[0],T[1],S((0,n.useState)(!1),2));_[0],_[1],(0,n.useEffect)(function(){t&&v(function(e){return j(j({},e),{},{username:t.username})})},[t]);var C=function(e){var t=e.target,r=t.name,n=t.value;v(function(e){return j(j({},e),{},O({},r,n))})},G=function(){var e,n=(e=w().m(function e(){var n,a,o,i;return w().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t&&r){e.n=1;break}return e.a(2);case 1:if(!y.newPassword&&!y.currentPassword){e.n=4;break}if(y.newPassword===y.confirmPassword){e.n=2;break}return E({type:"error",text:"New passwords do not match"}),e.a(2);case 2:if(!(y.newPassword.length<6)){e.n=3;break}return E({type:"error",text:"Password must be at least 6 characters long"}),e.a(2);case 3:if(y.currentPassword){e.n=4;break}return E({type:"error",text:"Current password is required to change password"}),e.a(2);case 4:return A(!0),E(null),e.p=5,e.n=6,fetch("".concat(c.J,"/auth/profile"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({username:y.username})});case 6:return n=e.v,e.n=7,n.json();case 7:if(a=e.v,n.ok){e.n=8;break}return E({type:"error",text:a.message||"Failed to update profile"}),e.a(2);case 8:if(!y.newPassword||!y.currentPassword){e.n=12;break}return e.n=9,fetch("".concat(c.J,"/auth/change-password"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({currentPassword:y.currentPassword,newPassword:y.newPassword})});case 9:return o=e.v,e.n=10,o.json();case 10:if(i=e.v,o.ok){e.n=11;break}return E({type:"error",text:i.message||"Failed to change password"}),e.a(2);case 11:i.user&&l(i.user),e.n=13;break;case 12:l({username:y.username});case 13:E({type:"success",text:"Profile updated successfully!"}),d(!1),v(function(e){return j(j({},e),{},{currentPassword:"",newPassword:"",confirmPassword:""})}),e.n=15;break;case 14:e.p=14,e.v,E({type:"error",text:"Network error occurred"});case 15:return e.p=15,A(!1),e.f(15);case 16:return e.a(2)}},e,null,[[5,14,15,16]])}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function c(e){N(o,n,a,c,l,"next",e)}function l(e){N(o,n,a,c,l,"throw",e)}c(void 0)})});return function(){return n.apply(this,arguments)}}();return t?n.createElement("div",{className:"max-w-7xl mx-auto p-6 space-y-8"},x&&n.createElement("div",{className:"p-4 rounded-lg max-w-2xl mx-auto ".concat("success"===x.type?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200")},x.text),n.createElement("div",{className:"grid gap-8 lg:grid-cols-3"},n.createElement("div",{className:"lg:col-span-2 space-y-8"},n.createElement(f,null),n.createElement(o.Z,{title:s("profile.profileSettings")},n.createElement("div",{className:"space-y-6"},m?n.createElement("div",{className:"space-y-6"},n.createElement("div",null,n.createElement("h4",{className:"text-lg font-medium text-gray-800 mb-4"},s("profile.editProfile")),n.createElement("div",{className:"space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},s("profile.username")),n.createElement("input",{type:"text",name:"username",value:y.username,onChange:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:s("profile.enterUsername")})))),n.createElement("div",null,n.createElement("h4",{className:"text-lg font-medium text-gray-800 mb-4"},s("profile.passwordSettings")),n.createElement("p",{className:"text-sm text-gray-600 mb-4"},s("profile.passwordChangeNote")),n.createElement("div",{className:"space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},s("profile.currentPassword")),n.createElement("input",{type:"password",name:"currentPassword",value:y.currentPassword,onChange:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:s("profile.enterCurrentPassword")})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},s("profile.newPassword")),n.createElement("input",{type:"password",name:"newPassword",value:y.newPassword,onChange:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:s("profile.enterNewPassword")})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},s("profile.confirmPassword")),n.createElement("input",{type:"password",name:"confirmPassword",value:y.confirmPassword,onChange:C,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:s("profile.confirmNewPassword")})))),n.createElement("div",{className:"flex gap-3 pt-4"},n.createElement("button",{onClick:G,disabled:k,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 font-medium"},s(k?"profile.saving":"profile.saveChanges")),n.createElement("button",{onClick:function(){d(!1),v(function(e){return j(j({},e),{},{username:(null==t?void 0:t.username)||"",currentPassword:"",newPassword:"",confirmPassword:""})}),E(null)},className:"px-6 py-3 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 transition-colors font-medium"},s("profile.cancel")))):n.createElement("div",{className:"space-y-4"},n.createElement("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},n.createElement("div",null,n.createElement("h4",{className:"font-medium text-gray-900"},s("profile.username")),n.createElement("p",{className:"text-gray-600"},t.username)),n.createElement("button",{onClick:function(){return d(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},s("profile.edit"))))))),n.createElement("div",{className:"lg:col-span-1"},n.createElement(b,null)))):n.createElement("div",{className:"flex items-center justify-center h-full"},n.createElement("p",{className:"text-gray-600"},"Please log in to view your profile."))}},9740:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(6540),a=function(e){var t=e.title,r=e.children,a=e.className,o=void 0===a?"":a,c=e.headerAction;return n.createElement("section",{className:"card w-full ".concat(o)},(t||c)&&n.createElement("div",{className:"flex items-center justify-between px-5 pt-5"},t&&n.createElement("h3",{className:"text-lg font-semibold text-slate-900"},t),c),n.createElement("div",{className:"p-5"},r))}}}]);